{"version":3,"sources":["webpack:///webpack/bootstrap 739628366e8a6c91c489?d06b*****","webpack:///./components/problemsUserIsLearning/services/getNextScore.js?aa55***","webpack:///./components/problemsUserIsLearning/services/initialScore.js?8a9e***","webpack:///./components/problemsUserIsLearning/services/getNextScore.test.js","webpack:///external \"chai\"?e564***"],"names":["getNextScore","prevEasiness","prevConsecutiveCorrectAnswers","performanceRating","nextEasiness","clipEasiness","nextConsecutiveCorrectAnswers","isAnswerCorrect","daysToNextReview","clipDaysToNextReview","easiness","consecutiveCorrectAnswers","Math","max","days","min","initialScore","describe","it","score","intervals","generateNReviews","to","deep","equal","push","n","i","nextScore","floor"],"mappings":"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","file":"test/components/problemsUserIsLearning/services/getNextScore.test.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 74);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 739628366e8a6c91c489","// ___why not use original method?\n// (http://www.blueraja.com/blog/477/a-better-spaced-repetition-learning-algorithm-sm2)\n// original method resolves into intervals too harsh:\n//\n// { days: 6 },\n// { days: 10 },\n// { days: 30 },\n// { days: 99 },\n// { days: 339 },\n// { days: 1231 },\n// { days: 4724 },\n// { days: 19128 },\n// { days: 24428 }\n\n// memrise\n//\n// 4 hours, 12 hours, 1 day, 6 days, 12 days, 24 days, 48 days, 96 days, 180 days\n\n// mine\n// [ PostgresInterval { hours: 4, minutes: 48 },\n//   PostgresInterval { days: 1, hours: 10, minutes: 59, seconds: 31 },\n//   PostgresInterval { days: 4, hours: 19, minutes: 32, seconds: 9 },\n//   PostgresInterval { days: 8, hours: 20, minutes: 47, seconds: 2 },\n//   PostgresInterval { days: 13, hours: 15, minutes: 53, seconds: 16 },\n//   PostgresInterval { days: 19, hours: 6 },\n//   PostgresInterval { days: 25, hours: 16, minutes: 16, seconds: 19 },\n//   PostgresInterval { days: 32, hours: 23, minutes: 51, seconds: 21 },\n//   PostgresInterval { days: 41, hours: 5, minutes: 54, seconds: 14 },\n//   PostgresInterval { days: 50, hours: 11, minutes: 34, seconds: 4 },\n//   PostgresInterval { days: 60, hours: 18 } ]\n//\n// http://making.duolingo.com/how-we-learn-how-you-learn - what duolingo uses, may be interesting.\n\n// performanceRating: on a scale from 0-5 (0=worst, 5=best)\n// 0.28\nconst getNextScore = (prevEasiness, prevConsecutiveCorrectAnswers, performanceRating) => {\n  const nextEasiness = clipEasiness(\n    prevEasiness +\n    (-0.8) +\n    (0.28 * performanceRating) +\n    (-0.02 * (performanceRating ** 2))\n  );\n\n  const nextConsecutiveCorrectAnswers =\n    isAnswerCorrect(performanceRating) ?\n    prevConsecutiveCorrectAnswers + 1 :\n    0;\n\n  const daysToNextReview = clipDaysToNextReview(\n    isAnswerCorrect(performanceRating) ?\n    // 6 * (nextEasiness ** (nextConsecutiveCorrectAnswers - 1)) :\n    0.2 + (0.2 * ((nextEasiness ** 2.2) * ((nextConsecutiveCorrectAnswers - 1) ** 2.2))) :\n    0.2 // otherwise review it in 4 hours\n  );\n\n  return {\n    easiness: nextEasiness,\n    consecutiveCorrectAnswers: nextConsecutiveCorrectAnswers,\n    daysToNextReview\n  };\n};\n\nconst isAnswerCorrect = (performanceRating) => performanceRating >= 4;\n\n// easiness must be >= 1.3\n// if it's smaller - make it 1.3\nconst clipEasiness = (easiness) => Math.max(easiness, 1.3);\n\nconst clipDaysToNextReview = (days) => Math.min(days, 300);\n\nexport { getNextScore };\n\n\n\n// WEBPACK FOOTER //\n// ./components/problemsUserIsLearning/services/getNextScore.js","const initialScore = () => ({\n  easiness: 2.5,\n  consecutiveCorrectAnswers: 0\n});\n\nexport { initialScore };\n\n\n\n// WEBPACK FOOTER //\n// ./components/problemsUserIsLearning/services/initialScore.js","import { expect } from 'chai';\nimport { getNextScore } from './getNextScore';\nimport { initialScore } from './initialScore';\n\ndescribe('getNextScore', () => {\n  it('all 5 rating', () => {\n    const score = initialScore();\n    const intervals = generateNReviews(score, 5, 10);\n\n    expect(intervals).to.deep.equal([0, 1, 9, 23, 47, 83, 133, 200, 286, 300]);\n  });\n\n  it('all 4 ratings', () => {\n    const score = initialScore();\n    const intervals = generateNReviews(score, 4, 10);\n\n    expect(intervals).to.deep.equal([0, 1, 7, 17, 31, 51, 77, 108, 145, 188]);\n  });\n\n  it('all 0 ratings', () => {\n    const score = initialScore();\n    const intervals = generateNReviews(score, 0, 10);\n\n    expect(intervals).to.deep.equal([0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n  });\n\n  it('different ratings', () => {\n    const score = initialScore();\n    const intervals = [];\n    intervals.push(...generateNReviews(score, 5.0, 5));\n    intervals.push(...generateNReviews(score, 3.0, 3));\n    intervals.push(...generateNReviews(score, 4.0, 5));\n\n    expect(intervals).to.deep.equal([0, 1, 9, 23, 47, 0, 0, 0, 0, 1, 7, 18, 34]);\n  });\n});\n\nconst generateNReviews = (score, performanceRating, n) => {\n  const intervals = [];\n  for (let i = 0; i < n; i++) {\n    const nextScore = getNextScore(\n      score.easiness,\n      score.consecutiveCorrectAnswers,\n      performanceRating\n    );\n    intervals.push(Math.floor(nextScore.daysToNextReview));\n    score.easiness = nextScore.easiness;\n    score.consecutiveCorrectAnswers = nextScore.consecutiveCorrectAnswers;\n  }\n  return intervals;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./components/problemsUserIsLearning/services/getNextScore.test.js","module.exports = require(\"chai\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chai\"\n// module id = 8\n// module chunks = 1 2 3 5 6"],"sourceRoot":""}