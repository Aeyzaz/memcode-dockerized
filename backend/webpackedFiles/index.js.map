{"version":3,"sources":["webpack:///webpack/bootstrap 739628366e8a6c91c489","webpack:///./db/init.js","webpack:///./services/requireKeys.js","webpack:///external \"express\"","webpack:///./services/catchAsync.js","webpack:///external \"pg-promise\"","webpack:///./components/coursesUserIsLearning/model/index.js","webpack:///./services/camelizeDbColumns.js","webpack:///./components/courses/model/index.js","webpack:///./components/problemsUserIsLearning/model/index.js","webpack:///./components/users/model/index.js","webpack:///./components/courses/model/select/services/wherePublic.js","webpack:///./components/problems/model/index.js","webpack:///./components/problemsUserIsLearning/model/select.js","webpack:///./services/integerizeDbColumns.js","webpack:///./components/problemsUserIsLearning/services/getNextScore.js","webpack:///./components/problemsUserIsLearning/services/initialScore.js","webpack:///./components/courses/model/ddelete.js","webpack:///./components/courses/model/insert.js","webpack:///./components/courses/model/select/index.js","webpack:///./components/courses/model/select/services/getCoursesWithStats.js","webpack:///./components/courses/model/update.js","webpack:///./components/users/model/insert.js","webpack:///./components/users/model/select.js","webpack:///./components/users/model/update.js","webpack:///./middlewares/authenticate.js","webpack:///external \"node-fetch\"","webpack:///./middlewares/handleErrors.js","webpack:///./components/coursesUserIsLearning/model/insert.js","webpack:///./components/coursesUserIsLearning/model/select/index.js","webpack:///./components/coursesUserIsLearning/model/update.js","webpack:///./components/problems/model/ddelete.js","webpack:///./components/problems/model/insert.js","webpack:///./components/problems/model/select.js","webpack:///./components/problemsUserIsLearning/model/ddelete.js","webpack:///./components/problemsUserIsLearning/model/insert.js","webpack:///./components/problemsUserIsLearning/model/update.js","webpack:///external \"jsonwebtoken\"","webpack:///external \"pretty-error\"","webpack:///external \"path\"","webpack:///./routes.js","webpack:///../env.js","webpack:///./components/admin/routes.js","webpack:///./components/auth/routes/index.js","webpack:///./components/auth/routes/services/github/githubFetchAccessToken.js","webpack:///./components/auth/routes/services/github/githubFetchAuthorizedAccount.js","webpack:///./components/auth/routes/services/google/googleFetchAccessToken.js","webpack:///./components/auth/routes/services/google/googleFetchAuthorizedAccount.js","webpack:///./components/courseCategories/model/index.js","webpack:///./components/courseCategories/model/insert.js","webpack:///./components/courseCategories/model/select.js","webpack:///./components/courseCategories/routes.js","webpack:///./components/courses/routes.js","webpack:///./components/coursesUserIsLearning/routes.js","webpack:///./components/pages/routes.js","webpack:///./components/problems/routes.js","webpack:///./components/problemsUserIsLearning/routes.js","webpack:///./html.js","webpack:///./middlewares/allowCrossDomain.js","webpack:///./middlewares/stopPropagationForAssets.js","webpack:///external \"body-parser\"","webpack:///external \"form-data\"","webpack:///external \"querystring\"","webpack:///external \"url\"","webpack:///./index.js","webpack:///external \"babel-polyfill\"","webpack:///../~/source-map-support/register.js","webpack:///../~/source-map-support/source-map-support.js","webpack:///external \"fs\"","webpack:///external \"module\"","webpack:///external \"source-map\""],"names":["pgPromise","camelizeColumns","data","template","prop","camel","utils","camelize","map","d","pgOptions","query","e","receive","noWarnings","process","env","NODE_ENV","getConnectionString","host","port","database","user","password","DATABASE_URL","pgPackage","default","db","connect","then","obj","done","catch","error","console","log","message","requireKeys","requiredKeys","functionBeingValidated","realArgs","forEach","key","undefined","Error","catchAsync","asyncFunction","request","response","next","promise","select","insert","update","camelizeHashKeys","oldHash","newHash","Object","keys","camelizedKey","camelizeColumnsIn","aOld","asTitlesArray","aNew","includes","camelizeDbColumns","arrayOrHash","columnTitlesArray","Array","isArray","hash","ddelete","wherePublic","problem","problemId","one","content","id","allByCuilId","cuilId","any","findByCuilIdAndProblemId","integerizeColumnsIn","parseInt","integerizeDbColumns","getNextScore","prevEasiness","prevConsecutiveCorrectAnswers","performanceRating","nextEasiness","clipEasiness","nextConsecutiveCorrectAnswers","isAnswerCorrect","daysToNextReview","clipDaysToNextReview","easiness","consecutiveCorrectAnswers","Math","max","days","min","initialScore","destroyCourseWithProblems","courseId","none","create","course","title","description","ifPublic","courseCategoryId","userId","allCreated","where","params","allLearned","orderBy","allPublic","sortBy","limit","offset","array","countAllPublic","result","amountOfPublicCourses","oneForActions","getCourseStats","oneById","search","searchString","getCoursesWithStats","values","createFrom","oauthProvider","oauthProfile","oauthId","toString","username","login","avatarUrl","avatar_url","email","name","picture","oneByOauth","oneOrNone","authenticateMiddleware","headers","token","split","verify","currentUser","optionalAuthenticateMiddleware","prettyError","skipPackage","skipPath","skipNodeFiles","alias","appendStyle","color","background","marginLeft","handleErrors","renderedError","render","status","json","cuilFields","oneByCourseIdAndUserId","problemsToReview","idsOfProblemsToLearnAndReviewPerCourse","toReview","toLearn","toLearnToReviewResponse","toReviewResponse","correspondingToLearnResponse","find","toLearnResponse","ifActive","active","deleteMany","problemIds","type","createManyFromExcel","problems","tx","transaction","queries","answer","batch","moveToCourseMany","promises","problemPromise","Promise","all","allByCourseId","courseUserIsLearningId","ifIgnored","review","me","nextScore","ignore","routes","use","urlencoded","extended","parameterLimit","static","join","__dirname","get","send","router","Router","User","createOauthProvider","oauthProviderName","fetchAccessToken","fetchProfile","oauthSecret","createOauthCallbackRoute","code","accessToken","dbUser","sign","redirectUrl","encodeURIComponent","redirect","githubFetchAccessToken","append","method","Accept","body","stringWithAccessToken","reject","error_description","access_token","githubFetchAuthorizedAccount","Authorization","ok","res","googleFetchAccessToken","googleFetchAuthorizedAccount","courseCategory","courseCategoryGroupId","createGroup","courseCategoryGroup","seed","createGroupWithCategories","groupName","categoryNames","group","categoryPromises","allCourseCategoryGroups","courseCategories","courseCategoryGroups","Course","CourseUserIsLearning","pageSize","pageNumber","onePageOfCourses","amountOfAllCourses","amountOfPages","ceil","courses","filter","courseStats","post","put","updatedCourse","delete","ProblemUserIsLearning","courseUserIsLearning","puil","Problem","problemUserIsLearnings","stats","problemsByCourseId","createdProblem","arrayOfNulls","amountOfCreatedProblems","length","updatedProblem","cuil","createdPuil","puilId","ignoredPuil","googleAnalyticsScriptTag","html","allowCrossDomain","req","header","stopPropagationForAssets","url","end","PORT","listen"],"mappings":"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;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,YAAY,kBAAkB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0DAA0D,gCAAgC,EAAE;AAC5F,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,oCAAoC,wBAAwB;AAC5D,sCAAsC,sBAAsB;AAC5D,wCAAwC,4BAA4B;AACpE,iDAAiD,wBAAwB;AACzE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sCAAsC,eAAe;AACrD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,2FAA2F,oBAAoB;AAC/G;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC9gBA,+B;;;;;;ACAA,mC;;;;;;ACAA,uC","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 82);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 739628366e8a6c91c489","import * as pgPromise from 'pg-promise';\n\n// for pgOptions\n/* eslint-disable */ // because it's taken from online source, may want to rewrite some time\nconst camelizeColumns = (data) => {\n  const template = data[0];\n  for (let prop in template) {\n    const camel = pgPromise.utils.camelize(prop);\n    if (!(camel in template)) {\n      data.map((d) => {\n        d[camel] = d[prop];\n        delete d[prop];\n      });\n    }\n  }\n};\n\nconst pgOptions = {\n  query: (e) => {\n    // const cyan = \"\\x1b[36m%s\\x1b[0m\";\n    // console.log(cyan, e.query); // log the query being executed\n  },\n  // https://coderwall.com/p/irklcq\n  receive: (data) => {\n    camelizeColumns(data);\n  },\n  // disable warnings for tests,\n  // because it was complaining a lot about duplicated connection\n  noWarnings: process.env.NODE_ENV === 'test'\n};\n\nconst getConnectionString = () => {\n  switch (process.env.NODE_ENV) {\n    // pgweb: postgres://postgres:§1§1§1@localhost:5432/memcode\n    case 'development':\n      return {\n        host: 'localhost', // 'localhost' is the default;\n        port: 5432, // 5432 is the default;\n        database: 'memcode',\n        user: process.env['DB_USER'],\n        password: process.env['DB_PASSWORD']\n      };\n    case 'test':\n      return {\n        host: 'localhost', // 'localhost' is the default;\n        port: 5432, // 5432 is the default;\n        database: 'memcode_test',\n        user: process.env['DB_USER'],\n        password: process.env['DB_PASSWORD']\n      };\n    case 'production':\n      // this variable is set automatically after we do heroku addons:create heroku-postgresql:hobby-dev\n      return process.env.DATABASE_URL;\n  }\n};\n\nconst pgPackage = pgPromise.default(pgOptions);\nconst db = pgPackage(getConnectionString());\ndb.connect()\n  .then((obj) => {\n    obj.done(); // success, release the connection;\n  })\n  .catch((error) => {\n    console.log(\"ERROR:\", error.message || error);\n  });\n\nexport { db };\n\n\n\n// WEBPACK FOOTER //\n// ./db/init.js","// const b = requireKeys(\n//   ['userId', 'title'], // what to validate\n//   (args) => {\n//     console.log('creating a comment with title=' + args.title);\n//   }\n// )\n\n// b({ userId: 'wow' })\nconst requireKeys = (requiredKeys, functionBeingValidated) =>\n  (realArgs) => {\n    requiredKeys.forEach((key) => {\n      if (realArgs[key] === undefined) {\n        throw new Error(`${key} is required in function, but is undefined`);\n      }\n    });\n\n    return functionBeingValidated(realArgs);\n  };\n\nexport { requireKeys };\n\n\n\n// WEBPACK FOOTER //\n// ./services/requireKeys.js","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 2\n// module chunks = 0 1 5","// catch Async Await function's error\n//\n// catchAsync can only accept async functions, because otherwise .catch is undefined.\n// (or they need to return a promise, but that's not the case with express endpoints)\nconst catchAsync = (asyncFunction) =>\n  (request, response, next) => {\n    const promise = asyncFunction(request, response, next);\n    promise\n      .catch((error) => {\n        next(error);\n      });\n  };\n\nexport { catchAsync };\n\n\n\n// WEBPACK FOOTER //\n// ./services/catchAsync.js","module.exports = require(\"pg-promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pg-promise\"\n// module id = 4\n// module chunks = 0 1 2 3 4","// CREATE TABLE course_user_is_learning (\n//   id SERIAL PRIMARY KEY,\n\n//   active BOOLEAN,\n\n//   course_id INTEGER REFERENCES course (id) ON DELETE CASCADE,\n//   user_id INTEGER REFERENCES \"user\" (id) ON DELETE CASCADE,\n//   unique (course_id, user_id)\n// );\n\nimport { select } from './select';\nimport { insert } from './insert';\nimport { update } from './update';\n\nexport { select, insert, update };\n\n\n\n// WEBPACK FOOTER //\n// ./components/coursesUserIsLearning/model/index.js","import { utils } from 'pg-promise';\n\nconst camelizeHashKeys = (oldHash) => {\n  const newHash = {};\n  if (oldHash === undefined || oldHash === null) return null;\n  Object.keys(oldHash).forEach((key) => {\n    const camelizedKey = utils.camelize(key);\n    newHash[camelizedKey] = oldHash[key];\n  });\n  return newHash;\n};\n\n// a{ courseUserIsLearning: b{ wow_yes: 1 }, amountOfProblems: 3 }\nconst camelizeColumnsIn = (aOld, asTitlesArray) => {\n  const aNew = {};\n\n  Object.keys(aOld).forEach((key) => {\n    asTitlesArray.includes(key) ?\n      aNew[key] = camelizeHashKeys(aOld[key]) :\n      aNew[key] = aOld[key];\n  });\n\n  return aNew;\n};\n\n// output of row_to_json doesn't get camelized, lets do it manually like so:\n// .then(array => camelizeDbColumns(array, ['course', 'courseUserIsLearning']))\n// http://stackoverflow.com/questions/33023469/node-postgres-and-getting-joined-fields-with-repeated-names\nconst camelizeDbColumns = (arrayOrHash, columnTitlesArray) => {\n  if (Array.isArray(arrayOrHash)) {\n    return arrayOrHash.map(hash =>\n      camelizeColumnsIn(hash, columnTitlesArray)\n    );\n  } else {\n    return camelizeColumnsIn(arrayOrHash, columnTitlesArray);\n  }\n};\n\nexport { camelizeDbColumns };\n\n\n\n// WEBPACK FOOTER //\n// ./services/camelizeDbColumns.js","// CREATE TABLE course (\n//   id SERIAL PRIMARY KEY,\n//   title VARCHAR NOT NULL,\n\n//   user_id INTEGER REFERENCES \"user\" (id) ON DELETE CASCADE NOT NULL\n// );\n\nimport { select } from './select';\nimport { insert } from './insert';\nimport { update } from './update';\nimport { ddelete } from './ddelete';\n\nexport { select, insert, update, ddelete };\n\n\n\n// WEBPACK FOOTER //\n// ./components/courses/model/index.js","import { select } from './select';\nimport { update } from './update';\nimport { insert } from './insert';\nimport { ddelete } from './ddelete';\n\nexport { select, insert, update, ddelete };\n\n\n\n// WEBPACK FOOTER //\n// ./components/problemsUserIsLearning/model/index.js","import { insert } from './insert';\nimport { update } from './update';\nimport { select } from './select';\n\nexport { insert, select, update };\n\n\n\n// WEBPACK FOOTER //\n// ./components/users/model/index.js","const wherePublic = `\n  course.if_public = true\n    AND\n  (\n    SELECT COUNT(problem.id) FROM problem WHERE problem.course_id = course.id\n  ) >= 2\n`;\n\nexport default wherePublic;\n\n\n\n// WEBPACK FOOTER //\n// ./components/courses/model/select/services/wherePublic.js","import { db } from '~/db/init.js';\n\nconst update = (problem, problemId) =>\n  db.one(\n    \"UPDATE problem SET content=${content} WHERE id=${id} RETURNING *\",\n    {\n      content: problem.content,\n      id: problemId\n    }\n  );\n\nimport { insert } from './insert';\nimport { select } from './select';\nimport { ddelete } from './ddelete';\n\nexport { insert, select, update, ddelete };\n\n\n\n// WEBPACK FOOTER //\n// ./components/problems/model/index.js","import { db } from '~/db/init.js';\n\nconst select = {\n  allByCuilId: (cuilId) =>\n    db.any(\n      `\n      SELECT *\n      FROM problem_user_is_learning\n      WHERE\n        problem_user_is_learning.course_user_is_learning_id = \\${cuilId}\n      `,\n      { cuilId }\n    ),\n\n  findByCuilIdAndProblemId: (cuilId, problemId) =>\n    db.one(\n      `SELECT * FROM problem_user_is_learning\n      WHERE course_user_is_learning_id = \\${cuilId} AND problem_id = \\${problemId}`,\n      { cuilId, problemId }\n    )\n};\n\nexport { select };\n\n\n\n// WEBPACK FOOTER //\n// ./components/problemsUserIsLearning/model/select.js","// a{ courseUserIsLearning: b{ wow_yes: 1 }, amountOfProblems: 3 }\nconst integerizeColumnsIn = (aOld, asTitlesArray) => {\n  const aNew = {};\n\n  Object.keys(aOld).forEach((key) => {\n    asTitlesArray.includes(key) ?\n      aNew[key] = parseInt(aOld[key], 10) :\n      aNew[key] = aOld[key];\n  });\n\n  return aNew;\n};\n\n// https://github.com/vitaly-t/pg-promise/issues/118\n// COUNT(3) => to return js integer instead of string\nconst integerizeDbColumns = (arrayOrHash, columnTitlesArray) => {\n  if (Array.isArray(arrayOrHash)) {\n    return arrayOrHash.map(hash =>\n      integerizeColumnsIn(hash, columnTitlesArray)\n    );\n  } else {\n    return integerizeColumnsIn(arrayOrHash, columnTitlesArray);\n  }\n};\n\nexport { integerizeDbColumns };\n\n\n\n// WEBPACK FOOTER //\n// ./services/integerizeDbColumns.js","// ___why not use original method?\n// (http://www.blueraja.com/blog/477/a-better-spaced-repetition-learning-algorithm-sm2)\n// original method resolves into intervals too harsh:\n//\n// { days: 6 },\n// { days: 10 },\n// { days: 30 },\n// { days: 99 },\n// { days: 339 },\n// { days: 1231 },\n// { days: 4724 },\n// { days: 19128 },\n// { days: 24428 }\n\n// memrise\n//\n// 4 hours, 12 hours, 1 day, 6 days, 12 days, 24 days, 48 days, 96 days, 180 days\n\n// mine\n// [ PostgresInterval { hours: 4, minutes: 48 },\n//   PostgresInterval { days: 1, hours: 10, minutes: 59, seconds: 31 },\n//   PostgresInterval { days: 4, hours: 19, minutes: 32, seconds: 9 },\n//   PostgresInterval { days: 8, hours: 20, minutes: 47, seconds: 2 },\n//   PostgresInterval { days: 13, hours: 15, minutes: 53, seconds: 16 },\n//   PostgresInterval { days: 19, hours: 6 },\n//   PostgresInterval { days: 25, hours: 16, minutes: 16, seconds: 19 },\n//   PostgresInterval { days: 32, hours: 23, minutes: 51, seconds: 21 },\n//   PostgresInterval { days: 41, hours: 5, minutes: 54, seconds: 14 },\n//   PostgresInterval { days: 50, hours: 11, minutes: 34, seconds: 4 },\n//   PostgresInterval { days: 60, hours: 18 } ]\n//\n// http://making.duolingo.com/how-we-learn-how-you-learn - what duolingo uses, may be interesting.\n\n// performanceRating: on a scale from 0-5 (0=worst, 5=best)\n// 0.28\nconst getNextScore = (prevEasiness, prevConsecutiveCorrectAnswers, performanceRating) => {\n  const nextEasiness = clipEasiness(\n    prevEasiness +\n    (-0.8) +\n    (0.28 * performanceRating) +\n    (-0.02 * (performanceRating ** 2))\n  );\n\n  const nextConsecutiveCorrectAnswers =\n    isAnswerCorrect(performanceRating) ?\n    prevConsecutiveCorrectAnswers + 1 :\n    0;\n\n  const daysToNextReview = clipDaysToNextReview(\n    isAnswerCorrect(performanceRating) ?\n    // 6 * (nextEasiness ** (nextConsecutiveCorrectAnswers - 1)) :\n    0.2 + (0.2 * ((nextEasiness ** 2.2) * ((nextConsecutiveCorrectAnswers - 1) ** 2.2))) :\n    0.2 // otherwise review it in 4 hours\n  );\n\n  return {\n    easiness: nextEasiness,\n    consecutiveCorrectAnswers: nextConsecutiveCorrectAnswers,\n    daysToNextReview\n  };\n};\n\nconst isAnswerCorrect = (performanceRating) => performanceRating >= 4;\n\n// easiness must be >= 1.3\n// if it's smaller - make it 1.3\nconst clipEasiness = (easiness) => Math.max(easiness, 1.3);\n\nconst clipDaysToNextReview = (days) => Math.min(days, 300);\n\nexport { getNextScore };\n\n\n\n// WEBPACK FOOTER //\n// ./components/problemsUserIsLearning/services/getNextScore.js","const initialScore = () => ({\n  easiness: 2.5,\n  consecutiveCorrectAnswers: 0\n});\n\nexport { initialScore };\n\n\n\n// WEBPACK FOOTER //\n// ./components/problemsUserIsLearning/services/initialScore.js","import { db } from '~/db/init.js';\n\nconst ddelete = {\n  // will delete all problems of this course and all course_user_is_learning\n  destroyCourseWithProblems: (courseId) =>\n    db.none('DELETE FROM course WHERE id=${courseId}', { courseId })\n};\n\nexport { ddelete };\n\n\n\n// WEBPACK FOOTER //\n// ./components/courses/model/ddelete.js","import { db } from '~/db/init.js';\n\nconst insert = {\n  create: (course) =>\n    db.one(\n      \"INSERT INTO course (title, description, if_public, course_category_id, user_id, created_at) \\\n      VALUES (${title}, ${description}, ${ifPublic}, ${courseCategoryId}, ${userId}, timezone('UTC', now())) RETURNING *\",\n      {\n        title: course.title,\n        description: course.description,\n        ifPublic: course.ifPublic,\n        courseCategoryId: course.courseCategoryId || null,\n        userId: course.userId\n      }\n    )\n};\n\nexport { insert };\n\n\n\n// WEBPACK FOOTER //\n// ./components/courses/model/insert.js","import { db } from '~/db/init.js';\nimport { camelizeDbColumns } from '~/services/camelizeDbColumns';\nimport wherePublic from './services/wherePublic';\nimport getCoursesWithStats from './services/getCoursesWithStats';\n\nconst select = {\n  allCreated: (userId) =>\n    getCoursesWithStats({\n      where: `WHERE course.user_id = \\${userId}`,\n      params: { userId }\n    }),\n\n  // for /profile. returns all courses userId is currently learning.\n  // only active,\n  // filtered by amount of due problems (TODO)\n  allLearned: (userId) =>\n    getCoursesWithStats({\n      where: ` WHERE course_user_is_learning.user_id = \\${userId} AND course_user_is_learning.active = true`,\n      orderBy: `\n        ORDER BY\n          amount_of_problems_to_review DESC,\n          amount_of_problems_to_learn DESC,\n          next_due_date_in ASC\n      `,\n      params: { userId }\n    }),\n\n  // all public courses with 2 or more problems,\n  // sorted by amount of learners\n  // @sortBy = ['popular', 'new']\n  allPublic: ({ sortBy, limit, offset, courseCategoryId }) =>\n    db.any(\n      `\n      SELECT\n        row_to_json(course.*) AS course,\n        COUNT(distinct course_user_is_learning.user_id) AS amount_of_users_learning_this_course,\n        COUNT(distinct problem.id) AS amount_of_problems\n      FROM course\n      LEFT OUTER JOIN course_user_is_learning\n        ON (\n          course_user_is_learning.active = true\n          AND\n          course.id = course_user_is_learning.course_id\n        )\n      INNER JOIN problem\n        ON problem.course_id = course.id\n      WHERE\n        ${wherePublic}\n        ${courseCategoryId ? `AND course.course_category_id = ${courseCategoryId}` : ''}\n      GROUP BY course.id\n      ${\n        sortBy === 'popular' ?\n          `\n          ORDER BY\n            amount_of_users_learning_this_course DESC,\n            amount_of_problems DESC\n          ` :\n          `ORDER BY course.created_at DESC`\n      }\n      LIMIT ${limit}\n      OFFSET ${offset}\n      `\n    )\n      .then((array) => camelizeDbColumns(array, ['course'])),\n\n  countAllPublic: ({ courseCategoryId }) =>\n    db.one(\n      `\n      SELECT\n        COUNT(course.id) as amount_of_public_courses\n      FROM course\n      WHERE\n        ${wherePublic}\n        ${courseCategoryId ? `AND course.course_category_id = ${courseCategoryId}` : ''}\n      `\n    )\n      .then((result) => result.amountOfPublicCourses),\n\n  oneForActions: (id, userId) =>\n    getCoursesWithStats({\n      where: 'WHERE course.id = ${courseId}',\n      params: { userId, courseId: id }\n    })\n      .then((array) => array[0]),\n\n  getCourseStats: (id) =>\n    db.one(\n      `\n      SELECT\n        COUNT(distinct course_user_is_learning.user_id) AS amount_of_users_learning_this_course,\n        COUNT(distinct problem.id) AS amount_of_problems\n      FROM course\n      LEFT JOIN course_user_is_learning\n        ON (\n          course_user_is_learning.active = true\n          AND\n          course.id = course_user_is_learning.course_id\n        )\n      LEFT JOIN problem\n        ON problem.course_id = course.id\n      WHERE course.id = \\${id}\n      GROUP BY course.id\n      `,\n      { id }\n    ),\n\n  oneById: (id) =>\n    db.one(\n      `\n      SELECT *\n      FROM course\n      WHERE course.id = \\${id}\n      `,\n      { id }\n    ),\n\n  search: (userId, searchString) =>\n    getCoursesWithStats({\n      where: `\n        WHERE\n          (\n            course.title ILIKE \\${searchString} OR\n            course.description ILIKE \\${searchString}\n          )\n            AND\n          ( -- either public or created by me\n            course.user_id = \\${userId} OR\n            ${wherePublic}\n          )\n      `,\n      orderBy: `\n        ORDER BY\n          -- if matches by description instead of by title - place last\n          CASE\n            WHEN course.title ILIKE \\${searchString}\n            THEN 1 ELSE 0\n          END DESC,\n          CASE\n            WHEN course_user_is_learning.active = true\n            THEN 1 ELSE 0\n          END DESC,\n          CASE\n            WHEN course_user_is_learning.user_id = \\${userId}\n            THEN 1 ELSE 0\n          END DESC,\n          CASE\n            WHEN course.user_id = \\${userId}\n            THEN 1 ELSE 0\n          END DESC,\n          amount_of_problems_to_review DESC,\n          amount_of_problems_to_learn DESC,\n          next_due_date_in ASC\n        LIMIT 10\n      `,\n      params: { userId, searchString: `%${searchString}%` }\n    }),\n};\n\nexport { select };\n\n\n\n// WEBPACK FOOTER //\n// ./components/courses/model/select/index.js","import { db } from '~/db/init.js';\nimport { integerizeDbColumns } from '~/services/integerizeDbColumns';\nimport { camelizeDbColumns } from '~/services/camelizeDbColumns';\n\n// fetch course, courseUserAndLearning etc if it exists\n//\n// problemsToReview - later.\n//   basically problem_user_is_learning with nextDueDate < Time.now\n// problemsToLearn\n//   all problems of this course MINUS learned problem_user_is_learning of this course\n//\n// => [{\n//   course,\n//   courseUserIsLearning,\n//   amountOfProblemsToReview: 3,\n//   amountOfProblemsToLearn: 2,\n// }]\nconst getCoursesWithStats = ({ where = '', orderBy = '', params = {} } = {}) =>\n  db.any(\n    `SELECT\n      row_to_json(course.*)                  AS course,\n      row_to_json(course_user_is_learning.*) AS course_user_is_learning,\n      COUNT(distinct problem_user_is_learning.id) AS amount_of_problems_to_review,\n      (\n        (SELECT COUNT(problem.*) FROM problem WHERE problem.course_id = course.id) -\n        (SELECT COUNT(problem_user_is_learning.*) FROM problem_user_is_learning WHERE problem_user_is_learning.course_user_is_learning_id = course_user_is_learning.id)\n      )                                      AS amount_of_problems_to_learn,\n      COUNT(distinct problem.id)             AS amount_of_problems,\n      (\n        (\n          SELECT MIN(problem_user_is_learning.next_due_date)\n          FROM problem_user_is_learning\n          WHERE\n            (\n              problem_user_is_learning.course_user_is_learning_id = course_user_is_learning.id\n                AND\n              problem_user_is_learning.if_ignored = false\n            )\n        )\n          -\n        timezone('UTC', now())\n      )                                      AS next_due_date_in\n\n    FROM course\n\n    -- course_user_is_learning\n    LEFT OUTER JOIN course_user_is_learning\n      ON (\n        course_user_is_learning.course_id = course.id\n        AND\n        course_user_is_learning.user_id = \\${userId}\n      )\n\n    -- amount_of_problems_to_review\n    LEFT OUTER JOIN problem_user_is_learning\n      ON (\n        course_user_is_learning.id = problem_user_is_learning.course_user_is_learning_id\n        AND\n        problem_user_is_learning.next_due_date < timezone('UTC', now())\n        AND\n        problem_user_is_learning.if_ignored = false\n      )\n\n    -- amount_of_problems\n    LEFT OUTER JOIN problem ON problem.course_id = course.id\n\n    ${where}\n\n    GROUP BY course_user_is_learning.id, course.id\n\n    ${orderBy}\n    `,\n    params\n  )\n    .then((array) => camelizeDbColumns(array, ['course', 'courseUserIsLearning']))\n    .then((array) => integerizeDbColumns(array, ['amountOfProblemsToReview', 'amountOfProblemsToLearn', 'amountOfProblems']));\n\nexport default getCoursesWithStats;\n\n\n\n// WEBPACK FOOTER //\n// ./components/courses/model/select/services/getCoursesWithStats.js","import { db } from '~/db/init.js';\n\nconst update = {\n  update: (id, values) =>\n    db.one(\n      `\n      UPDATE course\n      SET\n        title = \\${title},\n        description = \\${description},\n        if_public = \\${ifPublic},\n        course_category_id = \\${courseCategoryId}\n      WHERE id = \\${id}\n      RETURNING *\n      `,\n      {\n        ...values,\n        id\n      }\n    )\n};\n\nexport { update };\n\n\n\n// WEBPACK FOOTER //\n// ./components/courses/model/update.js","import { db } from '~/db/init.js';\nimport { requireKeys } from '~/services/requireKeys';\n\nconst insert = {\n  createFrom: (oauthProvider, oauthProfile) => {\n    switch (oauthProvider) {\n      case 'github':\n        return insert.create({\n          oauthProvider: 'github',\n          oauthId: oauthProfile.id.toString(),\n          username: oauthProfile.login,\n          avatarUrl: oauthProfile.avatar_url,\n          email: oauthProfile.email\n        });\n      case 'google':\n        return insert.create({\n          oauthProvider: 'google',\n          oauthId: oauthProfile.id.toString(),\n          username: oauthProfile.name,\n          avatarUrl: oauthProfile.picture,\n          email: oauthProfile.email\n        });\n      default:\n        throw new Error(`No such oauthProvider as '${oauthProvider}'.`);\n    }\n  },\n\n  create: requireKeys(['oauthProvider', 'oauthId', 'username', 'avatarUrl', 'email'],\n    (user) =>\n      db.one(\n        `\n        INSERT INTO \"user\"\n          (\n            oauth_provider, oauth_id,\n            username, avatar_url, email,\n            created_at\n          )\n        VALUES\n          (\n            \\${oauthProvider}, \\${oauthId},\n            \\${username}, \\${avatarUrl}, \\${email},\n            timezone('UTC', now())\n          )\n        RETURNING *\n        `,\n        {\n          oauthProvider: user.oauthProvider,\n          oauthId: user.oauthId,\n          username: user.username,\n          avatarUrl: user.avatarUrl,\n          email: user.email\n        }\n      )\n  )\n};\n\nexport { insert };\n\n\n\n// WEBPACK FOOTER //\n// ./components/users/model/insert.js","import { db } from '~/db/init.js';\n\nconst select = {\n  // getUserByOauth('github', 7578559)\n  // => user\n  oneByOauth: (oauthProvider, oauthId) =>\n    db.oneOrNone(\n      'SELECT * FROM \"user\" WHERE oauth_provider=${oauthProvider} and oauth_id=${oauthId}',\n      {\n        oauthProvider,\n        oauthId: oauthId.toString()\n      }\n    ),\n\n  one: (id) =>\n    db.one(\n      `SELECT * FROM \"user\" WHERE id = \\${id}`,\n      { id }\n    )\n};\n\nexport { select };\n\n\n\n// WEBPACK FOOTER //\n// ./components/users/model/select.js","import { db } from '~/db/init.js';\n\nconst update = {\n  update: (id, email) =>\n    db.one(\n      `\n        UPDATE \"user\"\n        SET email = \\${email}\n        WHERE id = \\${id}\n        RETURNING *\n      `,\n      { id, email }\n    )\n};\n\nexport { update };\n\n\n\n// WEBPACK FOOTER //\n// ./components/users/model/update.js","import jwt from 'jsonwebtoken';\n\nimport { handleErrors } from './handleErrors';\n\n// make request.currentUser available\n// request.currentUser.oauthId,\n// request.currentUser.oauthProvider\nconst authenticateMiddleware = (request, response, next) => {\n  if (request.headers['authorization']) {\n    const token = request.headers['authorization'].split('Bearer ')[1];\n    jwt.verify(token, process.env['JWT_SECRET'], (error, user) => {\n      if (error) {\n        handleErrors(error, request, response);\n      } else {\n        request.currentUser = user;\n        next();\n      }\n    });\n  } else {\n    handleErrors(new Error(\"No authorization header provided\"), request, response);\n  }\n};\n\nconst optionalAuthenticateMiddleware = (request, response, next) => {\n  if (request.headers['authorization']) {\n    const token = request.headers['authorization'].split('Bearer ')[1];\n    jwt.verify(token, process.env['JWT_SECRET'], (error, user) => {\n      if (!error) request.currentUser = user;\n      next();\n    });\n  } else {\n    next();\n  }\n};\n\nexport { authenticateMiddleware, optionalAuthenticateMiddleware };\n\n\n\n// WEBPACK FOOTER //\n// ./middlewares/authenticate.js","module.exports = require(\"node-fetch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-fetch\"\n// module id = 26\n// module chunks = 0 1","// eslint-disable-next-line import/no-extraneous-dependencies\nimport PrettyError from 'pretty-error';\nconst prettyError = new PrettyError();\n\nprettyError.skipPackage('express', 'babel-polyfill', 'regenerator-runtime');\nprettyError.skipPath('internal/process/next_tick.js');\nprettyError.skipNodeFiles();\nprettyError.alias('/Users/lakesare/Desktop/memcode/backend/webpacked/test/components/auth/routes/webpack:', '');\nprettyError.alias('/Users/lakesare/Desktop/memcode/backend/webpacked/test', '');\nprettyError.appendStyle({\n  // our error message\n  'pretty-error > header > message': {\n    // let's change its color:\n    color: 'bright-white',\n    // we can also change the background color:\n    background: 'black'\n  },\n\n  // each trace item ...\n  'pretty-error > trace > item': {\n    // ... can have a margin ...\n    marginLeft: 20\n  },\n\n  'pretty-error > trace > item > header > pointer > file': {\n    color: 'blue'\n  },\n\n  'pretty-error > trace > item > header > pointer > colon': {\n    color: 'cyan'\n  },\n\n  'pretty-error > trace > item > header > pointer > line': {\n    color: 'black'\n  },\n\n  'pretty-error > trace > item > header > what': {\n    color: 'bright-white'\n  }\n});\n\n// because express needs to see there are 4 arguments to treat :error as error.\n// this middleware should also come last.\n// eslint-disable-next-line no-unused-vars\nconst handleErrors = (error, request, response, next) => {\n  if (process.env.NODE_ENV !== 'test') {\n    const renderedError = prettyError.render(error);\n    console.log(renderedError);\n  }\n\n  // interestingly if error.message is undefined, express will return {}\n  // it must _always_ be a string. I'm not sure if it is.\n  response.status(500).json({ error: error.message || error || '' });\n};\n\nexport { handleErrors };\n\n\n\n// WEBPACK FOOTER //\n// ./middlewares/handleErrors.js","import { db } from '~/db/init.js';\nimport { requireKeys } from '~/services/requireKeys';\n\nconst insert = {\n  create: requireKeys(['active', 'courseId', 'userId'],\n    (cuilFields) =>\n      db.one(\n        `INSERT INTO course_user_is_learning\n        (active, course_id, user_id, started_learning_at) VALUES\n        (\\${active}, \\${courseId}, \\${userId}, timezone('UTC', now()))\n        RETURNING *`,\n        cuilFields\n      )\n  )\n};\n\nexport { insert };\n\n\n\n// WEBPACK FOOTER //\n// ./components/coursesUserIsLearning/model/insert.js","import { db } from '~/db/init.js';\n\nconst select = {\n  oneByCourseIdAndUserId: (courseId, userId) =>\n    db.one(\n      `\n        SELECT *\n        FROM course_user_is_learning\n        WHERE course_id = \\${courseId} AND user_id = \\${userId}\n      `,\n      { courseId, userId }\n    ),\n\n  problemsToReview: (id) =>\n    db.any(\n      `\n      SELECT *\n      FROM problem\n      WHERE problem.id IN (\n        SELECT problem_user_is_learning.problem_id\n        FROM problem_user_is_learning\n        WHERE (\n            problem_user_is_learning.course_user_is_learning_id = \\${id}\n          AND\n            problem_user_is_learning.next_due_date < timezone('UTC', now())\n          AND\n            problem_user_is_learning.if_ignored = false\n        )\n      )\n      `,\n      { id }\n    ),\n\n  // {\n  //   1: {\n  //     toLearn: [1, 3, 4],\n  //     toReview: [5]\n  //   },\n  //   43: {\n  //     toLearn: [],\n  //     toReview: [2]\n  //   }\n  // }\n  idsOfProblemsToLearnAndReviewPerCourse: async (userId) => {\n    // all courses listed\n    // => [{ id: 3, toReview: [] }, ...]\n    const toReview = await db.any(\n      `\n      SELECT\n        course.id AS id,\n        COALESCE(json_agg(problem_user_is_learning.problem_id) FILTER (WHERE problem_user_is_learning.problem_id IS NOT NULL), '[]') AS to_review\n\n      FROM course_user_is_learning\n\n      INNER JOIN course\n        ON course_user_is_learning.course_id = course.id\n\n      LEFT JOIN problem_user_is_learning\n        ON (\n            problem_user_is_learning.course_user_is_learning_id = course_user_is_learning.id\n          AND\n            problem_user_is_learning.next_due_date < timezone('UTC', now())\n          AND\n            problem_user_is_learning.if_ignored = false\n        )\n\n      WHERE\n          course_user_is_learning.user_id = \\${userId}\n        AND\n          course_user_is_learning.active = true\n      GROUP BY course.id\n      `,\n      { userId }\n    );\n\n    // only those who have what to learn\n    // => [{ id: 4, toLearn: [3, 65] }]\n    const toLearn = await db.any(\n      `\n      SELECT\n        course.id AS id,\n        COALESCE(json_agg(problem.id) FILTER (WHERE problem.id IS NOT NULL), '[]') AS to_learn\n\n      FROM course_user_is_learning\n\n      INNER JOIN course\n        ON course_user_is_learning.course_id = course.id\n\n      LEFT JOIN problem\n        ON problem.course_id = course.id\n\n      WHERE\n          course_user_is_learning.user_id = \\${userId}\n        AND\n          course_user_is_learning.active = true\n        AND\n          -- problems in this course\n          problem.id\n          NOT IN\n          -- minus problems user is already learning\n          (\n            SELECT problem_user_is_learning.problem_id\n            FROM problem_user_is_learning\n            WHERE problem_user_is_learning.course_user_is_learning_id = course_user_is_learning.id\n          )\n      GROUP BY course.id\n      `,\n      { userId }\n    );\n\n    const toLearnToReviewResponse = {};\n    toReview.forEach((toReviewResponse) => {\n      const correspondingToLearnResponse = toLearn\n        .find((toLearnResponse) => toLearnResponse.id === toReviewResponse.id);\n\n      toLearnToReviewResponse[toReviewResponse.id] = {\n        toReview: toReviewResponse.toReview,\n        toLearn: correspondingToLearnResponse ? correspondingToLearnResponse.toLearn : []\n      };\n    });\n\n    return toLearnToReviewResponse;\n  }\n};\n\nexport { select };\n\n\n\n// WEBPACK FOOTER //\n// ./components/coursesUserIsLearning/model/select/index.js","import { db } from '~/db/init.js';\n\nconst update = {\n  ifActive: (id, ifActive) =>\n    db.one(\n      \"UPDATE course_user_is_learning \\\n      SET active = ${active} \\\n      WHERE id = ${id} \\\n      RETURNING *\",\n      { active: ifActive, id }\n    )\n};\n\nexport { update };\n\n\n\n// WEBPACK FOOTER //\n// ./components/coursesUserIsLearning/model/update.js","import { db } from '~/db/init.js';\n\nconst ddelete = {\n  deleteMany: (problemIds) =>\n    db.none(\n      `\n      DELETE FROM problem\n      WHERE id IN (${problemIds})\n      `\n    )\n};\n\nexport { ddelete };\n\n\n\n// WEBPACK FOOTER //\n// ./components/problems/model/ddelete.js","import { db } from '~/db/init.js';\nimport { requireKeys } from '~/services/requireKeys';\n\nconst insert = {\n  // we don't need to create problem_user_is_learning for every user who learns this course, because problem_user_is_learning is only for already learnt problems\n  create: requireKeys(['type', 'content', 'courseId'],\n    ({ type, content, courseId }) =>\n      db.one(\n        \"INSERT INTO problem (type, content, course_id, created_at) VALUES (${type}, ${content}, ${courseId}, timezone('UTC', now())) RETURNING *\",\n        {\n          type,\n          content,\n          courseId\n        }\n      )\n  ),\n\n  createManyFromExcel: (courseId, problems) =>\n    db.tx((transaction) => {\n      const queries = problems.map((problem) =>\n        transaction.none(\n          \"INSERT INTO problem (type, content, course_id, created_at) VALUES (${type}, ${content}, ${courseId}, timezone('UTC', now()))\",\n          {\n            type: 'separateAnswer',\n            content: {\n              content: problem.content,\n              answer: problem.answer\n            },\n            courseId\n          }\n        )\n      );\n      return transaction.batch(queries);\n    }),\n\n  moveToCourseMany: (problemIds, courseId) => {\n    const promises = problemIds.map((problemId) => {\n      const problemPromise = db.one('SELECT * FROM problem WHERE id = ${problemId}', { problemId });\n      return problemPromise.then((problem) =>\n        Promise.all([\n          insert.create({\n            type: problem.type,\n            content: problem.content,\n            courseId\n          }),\n          db.none('delete from problem where id=${problemId}', { problemId })\n        ])\n      );\n    });\n    return Promise.all(promises);\n  }\n};\n\nexport { insert };\n\n\n\n// WEBPACK FOOTER //\n// ./components/problems/model/insert.js","import { db } from '~/db/init.js';\n\nconst select = {\n  one: (id) =>\n    db.one(\n      'SELECT * FROM problem WHERE id = ${id}',\n      { id }\n    ),\n  allByCourseId: (courseId) =>\n    db.any(\n      'SELECT * FROM problem WHERE course_id = ${courseId} ORDER BY created_at',\n      { courseId }\n    ),\n  all: () =>\n    db.any('SELECT * FROM problem')\n};\n\nexport { select };\n\n\n\n// WEBPACK FOOTER //\n// ./components/problems/model/select.js","import { db } from '~/db/init.js';\n\nconst ddelete = {\n  ddelete: (id) =>\n    db.none('DELETE FROM problem_user_is_learning WHERE id=${id}', { id })\n};\n\nexport { ddelete };\n\n\n\n// WEBPACK FOOTER //\n// ./components/problemsUserIsLearning/model/ddelete.js","import { db } from '~/db/init.js';\nimport { requireKeys } from '~/services/requireKeys';\nimport { initialScore } from '../services/initialScore';\n\nconst insert = {\n  create: requireKeys(['courseUserIsLearningId', 'problemId'],\n    ({ courseUserIsLearningId, problemId, ifIgnored }) =>\n      db.one(\n        `\n        INSERT INTO problem_user_is_learning\n        (easiness, consecutive_correct_answers, next_due_date, course_user_is_learning_id, problem_id, if_ignored) VALUES\n        (\\${easiness}, \\${consecutiveCorrectAnswers}, timezone('UTC', now()), \\${courseUserIsLearningId}, \\${problemId}, \\${ifIgnored})\n        RETURNING *\n        `,\n        {\n          easiness: initialScore().easiness,\n          consecutiveCorrectAnswers: initialScore().consecutiveCorrectAnswers,\n          ifIgnored: ifIgnored || false,\n          courseUserIsLearningId,\n          problemId\n        }\n      )\n  )\n};\n\nexport { insert };\n\n\n\n// WEBPACK FOOTER //\n// ./components/problemsUserIsLearning/model/insert.js","import { db } from '~/db/init.js';\nimport { getNextScore } from '../services/getNextScore';\nimport { select } from './select';\n\nconst update = {\n  // solve particular problem\n  // performanceRating: 0-5\n  review: async (courseUserIsLearningId, problemId, performanceRating) => {\n    const me = await select.findByCuilIdAndProblemId(courseUserIsLearningId, problemId);\n    const nextScore = getNextScore(me.easiness, me.consecutiveCorrectAnswers, performanceRating);\n\n    return db.one(\n      `\n      UPDATE problem_user_is_learning\n      SET easiness = \\${easiness},\n          consecutive_correct_answers = \\${consecutiveCorrectAnswers},\n          next_due_date = timezone('UTC', (now() + '${nextScore.daysToNextReview} days'::INTERVAL)),\n          last_reviewed_at = timezone('UTC', now())\n      WHERE id = \\${id}\n      RETURNING *\n      `,\n      {\n        easiness: nextScore.easiness,\n        consecutiveCorrectAnswers: nextScore.consecutiveCorrectAnswers,\n        id: me.id\n      }\n    );\n  },\n\n  ignore: (id) =>\n    db.one(\n      `\n      UPDATE problem_user_is_learning\n      SET if_ignored = true\n      WHERE id = \\${id}\n      RETURNING *\n      `,\n      { id }\n    )\n};\n\nexport { update };\n\n\n\n// WEBPACK FOOTER //\n// ./components/problemsUserIsLearning/model/update.js","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 37\n// module chunks = 0 1","module.exports = require(\"pretty-error\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pretty-error\"\n// module id = 38\n// module chunks = 0 1 5","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 41\n// module chunks = 0 1","import express from 'express';\nconst routes = express();\n\nimport { allowCrossDomain } from './middlewares/allowCrossDomain';\nroutes.use(allowCrossDomain);\n\nimport { stopPropagationForAssets } from './middlewares/stopPropagationForAssets';\nroutes.use(stopPropagationForAssets);\n\nimport bodyParser from 'body-parser';\nroutes.use(bodyParser.json({ limit: '50mb' })); // to support JSON-encoded bodies\nroutes.use(bodyParser.urlencoded({\n  limit: '50mb', // otherwise will complain about image upload\n  extended: true,\n  parameterLimit: 50000\n}));\n\nimport path from 'path';\nroutes.use(express.static(path.join(__dirname, '../../frontend/staticFiles/underRoot')));\nroutes.use('/static-files', express.static(path.join(__dirname, '../../frontend/staticFiles/underUrlPrefix')));\nroutes.use('/webpacked-files', express.static(path.join(__dirname, '../../frontend/webpackedFiles')));\n\n// routes\nimport { router as coursesRouter } from './components/courses/routes';\nroutes.use('/api/courses', coursesRouter);\n\nimport { router as problemsRouter } from './components/problems/routes';\nroutes.use('/api/problems', problemsRouter);\n\nimport { router as coursesUserIsLearningRouter } from './components/coursesUserIsLearning/routes';\nroutes.use('/api/coursesUserIsLearning', coursesUserIsLearningRouter);\n\nimport { router as problemsUserIsLearningRouter } from './components/problemsUserIsLearning/routes';\nroutes.use('/api/problemsUserIsLearning', problemsUserIsLearningRouter);\n\nimport CourseCategoryRouter from './components/courseCategories/routes';\nroutes.use('/api/courseCategories', CourseCategoryRouter);\n\nimport { router as authRouter } from './components/auth/routes';\nroutes.use('/api/auth', authRouter);\n\n// GET routes that return results for particular frontend page. something like what a standard server-rendered structure would do.\nimport { router as pagesRouter } from './components/pages/routes';\nroutes.use('/api/pages', pagesRouter);\n\nimport { router as adminRouter } from './components/admin/routes';\nroutes.use('/api/admin', adminRouter);\n\nimport { html } from './html';\nroutes.get('*', (request, response) => response.send(html));\n\nimport { handleErrors } from './middlewares/handleErrors';\nroutes.use(handleErrors);\n\nexport { routes };\n\n\n\n// WEBPACK FOOTER //\n// ./routes.js","// When you require('env.js') because this isn’t wrapped in a module.exports (on purpose),\n// the code is literally executed and thus the variables are added to your environment\n// http://thewebivore.com/super-simple-environment-variables-node-js/\n\n// to change these, go to https://github.com/settings/applications/505783.\nprocess.env['GITHUB_OAUTH_ID'] = 'b4f6fd40a2b6401dc1b2';\nprocess.env['GITHUB_OAUTH_SECRET'] = '016cdc9ce2711937c92921f606965d09de545ad0';\n\nprocess.env['GOOGLE_OAUTH_ID'] = '613277424660-igluqg2i4b0usmp0u45a295e5i6k3048.apps.googleusercontent.com';\nprocess.env['GOOGLE_OAUTH_SECRET'] = 'OgmLGBupRx4rm8Cc4qLQ-En3';\nprocess.env['GOOGLE_OAUTH_CALLBACK'] = 'http://localhost:3000/api/auth/google/callback';\n\nprocess.env['CONTACT_EMAIL'] = 'contact@memcode.com';\n\nprocess.env['JWT_SECRET'] = 'lamlalamkflre';\n\nprocess.env['DB_USER'] = 'postgres';\nprocess.env['DB_PASSWORD'] = '§1§1§1';\n\n// postgres db\n// 0245328cb03fe9c577709aca77614b1743e9735fa510fecbd98bf4c3ef9f0afa\n\n\n// ___logo for contact@memcode.com\n// https://admin.google.com/memcode.com/AdminHome?pli=1&fral=1#CompanyProfile:flyout=personalization\n\n\n\n\n// WEBPACK FOOTER //\n// ../env.js","import express from 'express';\nconst router = express.Router();\n\nexport { router };\n\n\n\n// WEBPACK FOOTER //\n// ./components/admin/routes.js","import express from 'express';\nconst router = express.Router();\n\nimport jwt from 'jsonwebtoken';\nimport { catchAsync } from '~/services/catchAsync';\nimport { githubFetchAccessToken } from './services/github/githubFetchAccessToken';\nimport { githubFetchAuthorizedAccount } from './services/github/githubFetchAuthorizedAccount';\n\nimport { googleFetchAccessToken } from './services/google/googleFetchAccessToken';\nimport { googleFetchAuthorizedAccount } from './services/google/googleFetchAuthorizedAccount';\n\nimport * as User from '~/components/users/model';\n\nconst createOauthProvider = (oauthProviderName) => {\n  switch (oauthProviderName) {\n    case 'github':\n      return {\n        fetchAccessToken: githubFetchAccessToken,\n        fetchProfile: githubFetchAuthorizedAccount,\n        oauthId: process.env['GITHUB_OAUTH_ID'],\n        oauthSecret: process.env['GITHUB_OAUTH_SECRET']\n      };\n    case 'google':\n      return {\n        fetchAccessToken: googleFetchAccessToken,\n        fetchProfile: googleFetchAuthorizedAccount,\n        oauthId: process.env['GOOGLE_OAUTH_ID'],\n        oauthSecret: process.env['GOOGLE_OAUTH_SECRET']\n      };\n  }\n};\n\n// @param referrerUrl - e.g. http://memcode.com/please-sign-in\nconst createOauthCallbackRoute = async (oauthProviderName, code, response) => {\n  const oauthProvider = createOauthProvider(oauthProviderName);\n  const accessToken = await oauthProvider.fetchAccessToken(oauthProvider.oauthId, oauthProvider.oauthSecret, code);\n  const oauthProfile = await oauthProvider.fetchProfile(accessToken);\n  const dbUser =\n    await User.select.oneByOauth(oauthProviderName, oauthProfile.id) ||\n    await User.insert.createFrom(oauthProviderName, oauthProfile);\n  const token = jwt.sign(dbUser, process.env['JWT_SECRET']);\n\n  const redirectUrl = `/?token=${encodeURIComponent(token)}`;\n  response.redirect(redirectUrl);\n};\n\n// after user goes to github.com/login/oauth/authorize?client_id=OUR_ID, she is redirected here\n// docs: https://developer.github.com/apps/building-integrations/setting-up-and-registering-oauth-apps/about-authorization-options-for-oauth-apps\nrouter.get('/github/callback', catchAsync(async (request, response) => {\n  createOauthCallbackRoute('github', request.query.code, response);\n}));\n\nrouter.get('/google/callback', catchAsync(async (request, response) => {\n  createOauthCallbackRoute('google', request.query.code, response);\n}));\n\nexport { router };\n\n\n\n// WEBPACK FOOTER //\n// ./components/auth/routes/index.js","import fetch from 'node-fetch';\nimport FormData from 'form-data';\n\n// getting access token by sending github authorization code that will prove to github that we are the application (client_id, client_secret) that user gave access to\nconst githubFetchAccessToken = async (oauthId, oauthSecret, code) => {\n  const data = new FormData();\n  data.append('client_id', oauthId);\n  data.append('client_secret', oauthSecret);\n  data.append('code', code);\n  data.append('scope', \"user:email\");\n\n  // 'access_token=0bc4d5757978a90d8e9bc96fac795c876179f2ba&scope=&token_type=bearer'\n  const stringWithAccessToken = await\n    fetch('https://github.com/login/oauth/access_token', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json'\n      },\n      body: data\n    })\n      .then((response) => response.json());\n\n  // {\"error\":\"bad_verification_code\",\"error_description\":\"The code passed is incorrect or expired.\",\n  if (stringWithAccessToken.error) {\n    return Promise.reject(stringWithAccessToken.error_description);\n  } else {\n    const accessToken = stringWithAccessToken.access_token;\n    return accessToken;\n  }\n};\n\nexport { githubFetchAccessToken };\n\n\n\n// WEBPACK FOOTER //\n// ./components/auth/routes/services/github/githubFetchAccessToken.js","import fetch from 'node-fetch';\n\n// fetching our profile info signed in as a user (access token)\nconst githubFetchAuthorizedAccount = (accessToken) =>\n  fetch('https://api.github.com/user', {\n    headers: {\n      Authorization: `token ${accessToken}`\n    }\n  })\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        return response.json()\n          .then((res) => Promise.reject(res));\n      }\n    });\n\nexport { githubFetchAuthorizedAccount };\n\n\n\n// WEBPACK FOOTER //\n// ./components/auth/routes/services/github/githubFetchAuthorizedAccount.js","import fetch from 'node-fetch';\nimport { URLSearchParams } from 'url';\n\n// getting access token by sending github authorization code that will prove to github that we are the application (client_id, client_secret) that user gave access to\nconst googleFetchAccessToken = async (oauthId, oauthSecret, code) => {\n  const data = new URLSearchParams();\n  data.append('client_id', oauthId);\n  data.append('client_secret', oauthSecret);\n  data.append('code', code);\n  data.append('redirect_uri', process.env['GOOGLE_OAUTH_CALLBACK']);\n  data.append('grant_type', 'authorization_code');\n\n  const stringWithAccessToken = await\n    fetch('https://www.googleapis.com/oauth2/v4/token', {\n      method: 'POST',\n      body: data\n    })\n      .then((response) => response.json());\n\n  // {\"error\":\"bad_verification_code\",\"error_description\":\"The code passed is incorrect or expired.\",\n  if (stringWithAccessToken.error) {\n    return Promise.reject(stringWithAccessToken.error_description);\n  } else {\n    const accessToken = stringWithAccessToken.access_token;\n    return accessToken;\n  }\n};\n\nexport { googleFetchAccessToken };\n\n\n\n// WEBPACK FOOTER //\n// ./components/auth/routes/services/google/googleFetchAccessToken.js","import fetch from 'node-fetch';\n\n// fetching our profile info signed in as a user (access token)\nconst googleFetchAuthorizedAccount = (accessToken) =>\n  fetch('https://www.googleapis.com/userinfo/v2/me', {\n    headers: {\n      Authorization: `Bearer ${accessToken}`,\n      Accept: 'application/json'\n    }\n  }).then((response) => (\n    response.ok ?\n      response.json() :\n      response.json()\n        .then(Promise.reject)\n  ));\n\nexport { googleFetchAuthorizedAccount };\n\n\n\n// WEBPACK FOOTER //\n// ./components/auth/routes/services/google/googleFetchAuthorizedAccount.js","// CREATE TABLE course (\n//   id SERIAL PRIMARY KEY,\n//   title VARCHAR NOT NULL,\n\n//   user_id INTEGER REFERENCES \"user\" (id) ON DELETE CASCADE NOT NULL\n// );\n\nimport select from './select';\nimport insert from './insert';\n// import { update } from './update';\n// import { ddelete } from './ddelete';\n\nexport default { select, insert };\n\n\n\n// WEBPACK FOOTER //\n// ./components/courseCategories/model/index.js","import { db } from '~/db/init.js';\n// import { camelizeDbColumns } from '~/services/camelizeDbColumns';\n\nconst insert = {\n  create: (courseCategory) =>\n    db.one(\n      \"INSERT INTO course_category (name, course_category_group_id) \\\n      VALUES (${name}, ${courseCategoryGroupId}) RETURNING *\",\n      {\n        name: courseCategory.name,\n        courseCategoryGroupId: courseCategory.courseCategoryGroupId\n      }\n    ),\n\n  createGroup: (courseCategoryGroup) =>\n    db.one(\n      \"INSERT INTO course_category_group (name) VALUES (${name}) RETURNING *\",\n      {\n        name: courseCategoryGroup.name\n      }\n    ),\n\n  seed: () => {\n    const createGroupWithCategories = async (groupName, categoryNames) => {\n      const group = await insert.createGroup({ name: groupName });\n\n      const categoryPromises = categoryNames.map((name) =>\n        insert.create({ name, courseCategoryGroupId: group.id })\n      );\n      await Promise.all(categoryPromises);\n    };\n\n    return Promise.all([\n      createGroupWithCategories('Hard Sciences', ['Mathematics', 'Physics', 'Astronomy', 'Biology', 'Programming Languages', 'Computer Science']),\n      createGroupWithCategories('Soft Sciences', ['Politics', 'Economics', 'Psychology', 'Law', 'History', 'Music', 'Literature']),\n      createGroupWithCategories('Languages', ['English', 'German', 'Swedish'])\n    ]);\n  }\n\n};\n\nexport default insert;\n\n\n\n// WEBPACK FOOTER //\n// ./components/courseCategories/model/insert.js","import { db } from '~/db/init.js';\n// import { camelizeDbColumns } from '~/services/camelizeDbColumns';\nimport { integerizeDbColumns } from '~/services/integerizeDbColumns';\nimport wherePublic from '~/components/courses/model/select/services/wherePublic';\n\nexport default {\n  // .any always returns an array ([] one if nothing is present)\n  all: () =>\n    db.any(`\n      SELECT\n        course_category.*,\n        COUNT(course.id) AS amount_of_courses\n      FROM course_category\n      LEFT OUTER JOIN course\n        ON\n          course.course_category_id = course_category.id\n            AND\n          ${wherePublic}\n      GROUP BY course_category.id\n    `)\n      .then((array) => integerizeDbColumns(array, ['amountOfCourses'])),\n\n  allCourseCategoryGroups: () =>\n    db.any(`SELECT * FROM course_category_group`)\n};\n\n\n\n// WEBPACK FOOTER //\n// ./components/courseCategories/model/select.js","import express from 'express';\nconst router = express.Router();\n\nimport { catchAsync } from '~/services/catchAsync';\n\nimport CourseCategoryModel from './model';\n\nrouter.get('/withGroups', catchAsync(async (request, response) => {\n  const courseCategories = await CourseCategoryModel.select.all();\n  const courseCategoryGroups = await CourseCategoryModel.select.allCourseCategoryGroups();\n\n  response.status(200).json({ courseCategories, courseCategoryGroups });\n}));\n\n// router.get('/withGroupsForUserLearning', catchAsync(async (request, response) => {\n//   const courseCategories = await CourseCategoryModel.select.all();\n//   const courseCategoryGroups = await CourseCategoryModel.select.allCourseCategoryGroups();\n\n//   const userId = request.query.userId;\n\n//   response.status(200).json({ courseCategories, courseCategoryGroups });\n// }));\n\nrouter.get('/seed', catchAsync(async (request, response) => {\n  await CourseCategoryModel.insert.seed();\n  response.status(200).json({});\n}));\n\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./components/courseCategories/routes.js","import express from 'express';\nconst router = express.Router();\n\nimport { catchAsync } from '~/services/catchAsync';\nimport { authenticateMiddleware, optionalAuthenticateMiddleware } from '~/middlewares/authenticate';\n\nimport * as Course from './model';\nimport * as CourseUserIsLearning from '~/components/coursesUserIsLearning/model';\n\nrouter.get('/public', catchAsync(async (request, response) => {\n  const pageSize = request.query.pageSize;\n  const pageNumber = request.query.pageNumber;\n  const onePageOfCourses = await Course.select.allPublic({\n    sortBy: request.query.sortBy,\n    limit: pageSize,\n    offset: (pageNumber - 1) * pageSize,\n    courseCategoryId: request.query.courseCategoryId\n  });\n  const amountOfAllCourses = await Course.select.countAllPublic({\n    courseCategoryId: request.query.courseCategoryId\n  });\n\n  response.status(200).json({\n    onePageOfCourses,\n    amountOfPages: Math.ceil(amountOfAllCourses / pageSize)\n  });\n}));\n\n// => [{\n//   course: {},\n//   courseUserIsLearning: {},\n//   amountOfProblemsToReview: 3\n//   amountOfProblemsToLearn: 1\n// }], active, filtered by amount of due problems\nrouter.get('/allLearned', authenticateMiddleware, catchAsync(async (request, response) => {\n  const courseCategoryId = request.query.courseCategoryId;\n  let courses = await Course.select.allLearned(request.currentUser.id);\n\n  if (courseCategoryId) {\n    courses = courses.filter((course) => course.course.courseCategoryId.toString() === courseCategoryId.toString());\n  }\n  response.status(200).json(courses);\n}));\n\nrouter.get('/allCreated', authenticateMiddleware, catchAsync(async (request, response) => {\n  const courses = await Course.select.allCreated(request.currentUser.id);\n  response.status(200).json(courses);\n}));\n\nrouter.get('/search', optionalAuthenticateMiddleware, catchAsync(async (request, response) => {\n  const courses = await Course.select.search(request.currentUser && request.currentUser.id, request.query.searchString);\n  response.status(200).json(courses);\n}));\n\nrouter.get('/stats', optionalAuthenticateMiddleware, catchAsync(async (request, response) => {\n  const courseStats = await Course.select.getCourseStats(request.params.courseId);\n  response.status(200).json(courseStats);\n}));\n\nrouter.post('/', authenticateMiddleware, catchAsync(async (request, response) => {\n  const course = await Course.insert.create({ ...request.body['course'], userId: request.currentUser.id });\n\n  // add to learned courses immediately\n  await CourseUserIsLearning.insert.create({\n    courseId: course.id,\n    userId: request.currentUser.id,\n    active: true\n  });\n\n  response.status(200).json(course);\n}));\n\nrouter.put('/:id', catchAsync(async (request, response) => {\n  const updatedCourse = await Course.update.update(request.params.id, request.body['course']);\n  response.status(200).json(updatedCourse);\n}));\n\nrouter.delete('/:id', catchAsync(async (request, response) => {\n  await Course.ddelete.destroyCourseWithProblems(request.params.id);\n  response.status(200).json({});\n}));\n\nexport { router };\n\n\n\n// WEBPACK FOOTER //\n// ./components/courses/routes.js","import express from 'express';\nconst router = express.Router();\n\nimport { catchAsync } from '~/services/catchAsync';\nimport { authenticateMiddleware } from '~/middlewares/authenticate';\n\nimport * as CourseUserIsLearning from './model';\nimport * as ProblemUserIsLearning from '~/components/problemsUserIsLearning/model';\n\nrouter.post('/', authenticateMiddleware, catchAsync(async (request, response) => {\n  const courseUserIsLearning = await CourseUserIsLearning.insert.create({\n    courseId: request.body['courseId'],\n    userId: request.currentUser.id,\n    active: true\n  });\n  response.status(200).json(courseUserIsLearning);\n}));\n\nrouter.put('/:id/resumeLearning', catchAsync(async (request, response) => {\n  const courseUserIsLearning = await CourseUserIsLearning.update.ifActive(request.params['id'], true);\n  response.status(200).json(courseUserIsLearning);\n}));\n\nrouter.put('/:id/stopLearning', catchAsync(async (request, response) => {\n  const courseUserIsLearning = await CourseUserIsLearning.update.ifActive(request.params['id'], false);\n  response.status(200).json(courseUserIsLearning);\n}));\n\nrouter.put('/:id/problems/:problemId/review', authenticateMiddleware, catchAsync(async (request, response) => {\n  await ProblemUserIsLearning.update.review(\n    request.params['id'],\n    request.params['problemId'],\n    request.body['performanceRating']\n  );\n  response.status(200).json({});\n}));\n\nrouter.post('/:id/problems/:problemId/learn', authenticateMiddleware, catchAsync(async (request, response) => {\n  const puil = await ProblemUserIsLearning.insert.create({\n    courseUserIsLearningId: request.params['id'],\n    problemId: request.params['problemId']\n  });\n  response.status(200).json(puil);\n}));\n\nexport { router };\n\n\n\n// WEBPACK FOOTER //\n// ./components/coursesUserIsLearning/routes.js","import express from 'express';\nconst router = express.Router();\n\nimport { catchAsync } from '~/services/catchAsync';\nimport { authenticateMiddleware, optionalAuthenticateMiddleware } from '~/middlewares/authenticate';\n\nimport * as CourseUserIsLearning from '~/components/coursesUserIsLearning/model';\nimport * as ProblemUserIsLearning from '~/components/problemsUserIsLearning/model';\nimport * as Course from '~/components/courses/model';\nimport * as Problem from '~/components/problems/model';\n\n// ___per-page routes (/api/pages/page-url)\n// {\n//   courseUserIsLearning: {...},\n//   problems: [\n//     {coursesUserIsLearning\n//       problem, problemUserIsLearning\n//     },\n//     {\n//       problem\n//     }\n//   ]\n// }\nrouter.get('/courses/:id/learn', authenticateMiddleware, catchAsync(async (request, response) => {\n  const courseId = request.params['id'];\n\n  // find cuil\n  const courseUserIsLearning = await CourseUserIsLearning.select.oneByCourseIdAndUserId(courseId, request.currentUser.id);\n\n  // find problems\n  const problems = await Problem.select.allByCourseId(courseId);\n  const problemUserIsLearnings = await ProblemUserIsLearning.select.allByCuilId(courseUserIsLearning.id);\n\n  response.status(200).json({ courseUserIsLearning, problems, problemUserIsLearnings });\n}));\n\nrouter.get('/courses/:id/review', authenticateMiddleware, catchAsync(async (request, response) => {\n  const courseId = request.params['id'];\n\n  const courseUserIsLearning = await CourseUserIsLearning.select.oneByCourseIdAndUserId(courseId, request.currentUser.id);\n  const problems = await CourseUserIsLearning.select.problemsToReview(courseUserIsLearning.id);\n  response.status(200).json({ courseUserIsLearning, problems });\n}));\n\nrouter.get('/courses/:id/review/simulated', catchAsync(async (request, response) => {\n  const courseId = request.params['id'];\n  const problems = await Problem.select.allByCourseId(courseId);\n  response.status(200).json({ courseUserIsLearning: null, problems });\n}));\n\nrouter.get('/courses/:id/edit', authenticateMiddleware, catchAsync(async (request, response) => {\n  const courseId = request.params['id'];\n\n  const course = await Course.select.oneById(courseId);\n  const problems = await Problem.select.allByCourseId(courseId);\n\n  response.status(200).json({ course, problems });\n}));\n\nrouter.get('/courses/:id', catchAsync(async (request, response) => {\n  const courseId = request.params['id'];\n\n  const problems = await Problem.select.allByCourseId(courseId);\n\n  response.status(200).json(problems);\n}));\n\n// per-component routes (/api/pages/componentName/...)\nrouter.get('/courseActions/:courseId', optionalAuthenticateMiddleware, catchAsync(async (request, response) => {\n  const course = await Course.select.oneForActions(request.params.courseId, request.currentUser ? request.currentUser.id : null);\n  if (!course) throw new Error(\"Sorry, course with this id has not yet been created.\");\n  const courseStats = await Course.select.getCourseStats(request.params.courseId);\n\n  response.status(200).json({ ...course, stats: courseStats });\n}));\n\n// global state (?)\nrouter.get('/idsOfProblemsToLearnAndReviewPerCourse', authenticateMiddleware, catchAsync(async (request, response) => {\n  const idsOfProblemsToLearnAndReviewPerCourse = await CourseUserIsLearning.select.idsOfProblemsToLearnAndReviewPerCourse(request.currentUser.id);\n  response.status(200).json(idsOfProblemsToLearnAndReviewPerCourse);\n}));\n\nexport { router };\n\n\n\n// WEBPACK FOOTER //\n// ./components/pages/routes.js","import express from 'express';\nconst router = express.Router();\n\nimport { catchAsync } from '~/services/catchAsync';\nimport * as Problem from './model';\n\nrouter.get('/', catchAsync(async (request, response) => {\n  const courseId = request.query.courseId;\n  const problemsByCourseId = await Problem.select.allByCourseId(courseId);\n\n  response.status(200).json(problemsByCourseId);\n}));\n\nrouter.post('/', catchAsync(async (request, response) => {\n  const createdProblem = await Problem.insert.create(request.body['problem']);\n  response.status(200).json(createdProblem);\n}));\n\nrouter.post('/createManyFromExcel', catchAsync(async (request, response) => {\n  const courseId = request.body['courseId'];\n  const problems = request.body['problems'];\n  const arrayOfNulls = await Problem.insert.createManyFromExcel(courseId, problems);\n  response.status(200).json({ amountOfCreatedProblems: arrayOfNulls.length });\n}));\n\nrouter.put('/:id', catchAsync(async (request, response) => {\n  const updatedProblem = await Problem.update(request.body['problem'], request.params['id']);\n  response.status(200).json(updatedProblem);\n}));\n\nrouter.delete('/deleteMany', catchAsync(async (request, response) => {\n  await Problem.ddelete.deleteMany(request.body['problemIds']);\n  response.status(200).json({});\n}));\n\nrouter.post('/moveToCourseMany', catchAsync(async (request, response) => {\n  await Problem.insert.moveToCourseMany(\n    request.body['problemIds'],\n    request.body['courseId']\n  );\n  response.status(200).json({});\n}));\n\nexport { router };\n\n\n\n// WEBPACK FOOTER //\n// ./components/problems/routes.js","import express from 'express';\nconst router = express.Router();\n\nimport { catchAsync } from '~/services/catchAsync';\nimport { authenticateMiddleware } from '~/middlewares/authenticate';\n\nimport * as Problem from '~/components/problems/model';\nimport * as CourseUserIsLearning from '~/components/coursesUserIsLearning/model';\nimport * as ProblemUserIsLearning from './model';\n\nrouter.post('/', authenticateMiddleware, catchAsync(async (request, response) => {\n  const problemId = request.body['problemId'];\n  const userId = request.currentUser.id;\n\n  const problem = await Problem.select.one(problemId);\n  const cuil = await CourseUserIsLearning.select.oneByCourseIdAndUserId(problem.courseId, userId);\n\n  const createdPuil = await ProblemUserIsLearning.insert.create({\n    courseUserIsLearningId: cuil.id,\n    problemId\n  });\n  response.status(200).json(createdPuil);\n}));\n\nrouter.delete('/:id', authenticateMiddleware, catchAsync(async (request, response) => {\n  const puilId = request.params['id'];\n  await ProblemUserIsLearning.ddelete.ddelete(puilId);\n  response.status(200).json({});\n}));\n\nrouter.put('/:id/ignore', authenticateMiddleware, catchAsync(async (request, response) => {\n  const ignoredPuil = await ProblemUserIsLearning.update.ignore(request.params['id']);\n  response.status(200).json(ignoredPuil);\n}));\n\nexport { router };\n\n\n\n// WEBPACK FOOTER //\n// ./components/problemsUserIsLearning/routes.js","import { escape } from 'querystring';\n\nconst googleAnalyticsScriptTag = process.env['NODE_ENV'] === 'production' ?\n  `\n    <!-- https://analytics.google.com/analytics/web/?authuser=0#management/Settings/a109178648w163012947p163935248/%3Fm.page%3DTrackingCode%26_r.ghFlowId%3D6324039/ -->\n    <!-- Global site tag (gtag.js) - Google Analytics -->\n    <script src=\"https://www.googletagmanager.com/gtag/js?id=UA-109178648-1\" async></script>\n    <script>\n      window.dataLayer = window.dataLayer || [];\n      function gtag() { dataLayer.push(arguments); }\n      gtag('js', new Date());\n\n      gtag('config', 'UA-109178648-1');\n    </script>\n  ` :\n  '';\n\nconst html = `\n  <!DOCTYPE html>\n  <html lang=\"en\">\n  <head>\n    <title>Memcode</title>\n\n    <!-- css -->\n    <link href=\"/webpacked-files/index.css\" rel=\"stylesheet\">\n\n    <!-- quill theme support -->\n    <link rel=\"stylesheet\" href=\"/static-files/quill.snow.css\">\n\n    <!-- katex support -->\n    <link rel=\"stylesheet\" href=\"/static-files/katex.min.css\"/>\n    <script src=\"/static-files/katex.min.js\"></script>\n\n    <!-- to verify google webmasters -->\n    <meta name=\"google-site-verification\" content=\"Cv256pnTnFWM0T6qi3SXK1u1K-B6W7IJQ9JoOQ_1I_E\"/>\n    <!-- to make site look bigger on mobiles -->\n    <meta id=\"meta\" name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\n\n    <!-- as per https://realfavicongenerator.net/favicon_result?file_id=p1cd8gt6qj1kvp121l103k18gh1u4c6#.WvYIatOuzhM -->\n    <link rel=\"icon\" type=\"image/png\" href=\"/favicon-32x32.png?v=3\" sizes=\"32x32\"/>\n    <link rel=\"icon\" type=\"image/png\" href=\"/favicon-16x16.png?v=3\" sizes=\"16x16\"/>\n    <link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/apple-touch-icon.png?v=3\">\n    <link rel=\"mask-icon\" href=\"/safari-pinned-tab.svg?v=3\" color=\"#ba2490\">\n    <link rel=\"manifest\" href=\"/site.webmanifest\">\n    <meta name=\"msapplication-TileColor\" content=\"#9f00a7\">\n    <meta name=\"theme-color\" content=\"#ffffff\">\n\n    <!-- data-react-helmet=\"true\" for react-helmet to supersede it instead of adding a new description tag -->\n    <meta name=\"description\" content=\"Create your own course to memorize anything you want. Flashcard-based, with formatting and images, with multiple flashcard types.\" data-react-helmet=\"true\"/>\n  </head>\n  <body>\n    <div id=\"root\"></div>\n\n    <!-- env vars -->\n    <script>\n      window.env = {\n        githubSignInLink: 'https://github.com/login/oauth/authorize?scope=user:email&client_id=${process.env['GITHUB_OAUTH_ID']}',\n        googleSignInLink: 'https://accounts.google.com/o/oauth2/v2/auth?scope=profile%20email&redirect_uri=${escape(process.env['GOOGLE_OAUTH_CALLBACK'])}&response_type=code&client_id=${process.env['GOOGLE_OAUTH_ID']}',\n        contactEmail: 'contact@memcode.com'\n      };\n    </script>\n\n    <!-- main js file -->\n    <script type=\"text/javascript\" src=\"/webpacked-files/index.js\" defer></script>\n\n    ${googleAnalyticsScriptTag}\n  </html>\n`;\n\nexport { html };\n\n\n\n// WEBPACK FOOTER //\n// ./html.js","const allowCrossDomain = (req, res, next) => {\n  res.status(200);\n  res.header(\"Access-Control-Allow-Origin\", \"*\");\n  res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");\n  next();\n};\n\nexport { allowCrossDomain };\n\n\n\n// WEBPACK FOOTER //\n// ./middlewares/allowCrossDomain.js","// https://github.com/jaredhanson/passport/issues/14#issuecomment-21863553\nconst stopPropagationForAssets = (req, res, next) => {\n  if (req.url !== '/favicon.ico' && req.url !== '/styles.css') {\n    return next();\n  } else {\n    res.status(200);\n    res.header('Cache-Control', 'max-age=4294880896');\n    res.end();\n  }\n};\n\nexport { stopPropagationForAssets };\n\n\n\n// WEBPACK FOOTER //\n// ./middlewares/stopPropagationForAssets.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 62\n// module chunks = 0 1","module.exports = require(\"form-data\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"form-data\"\n// module id = 63\n// module chunks = 0 1","module.exports = require(\"querystring\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"querystring\"\n// module id = 64\n// module chunks = 0 1","module.exports = require(\"url\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 65\n// module chunks = 0 1","import 'source-map-support/register';\n\n// load environment variables.\nimport '../env.js';\nconsole.log('NODE_ENV: ' + process.env.NODE_ENV);\n\nimport { routes } from './routes';\n\n// process.env.PORT lets the port be set by Heroku\nconst port = process.env.PORT || 3000;\n\nroutes.listen(port, (error) => {\n  error ?\n  console.log(`Server start error: ${error}`) :\n  console.log(`Server is listening on port: ${port}`);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","module.exports = require(\"babel-polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-polyfill\"\n// module id = 70\n// module chunks = 0","require('./').install();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/source-map-support/register.js\n// module id = 77\n// module chunks = 0","var SourceMapConsumer = require('source-map').SourceMapConsumer;\nvar path = require('path');\n\nvar fs;\ntry {\n  fs = require('fs');\n  if (!fs.existsSync || !fs.readFileSync) {\n    // fs doesn't have all methods we need\n    fs = null;\n  }\n} catch (err) {\n  /* nop */\n}\n\n// Only install once if called multiple times\nvar errorFormatterInstalled = false;\nvar uncaughtShimInstalled = false;\n\n// If true, the caches are reset before a stack trace formatting operation\nvar emptyCacheBetweenOperations = false;\n\n// Supports {browser, node, auto}\nvar environment = \"auto\";\n\n// Maps a file path to a string containing the file contents\nvar fileContentsCache = {};\n\n// Maps a file path to a source map for that file\nvar sourceMapCache = {};\n\n// Regex for detecting source maps\nvar reSourceMap = /^data:application\\/json[^,]+base64,/;\n\n// Priority list of retrieve handlers\nvar retrieveFileHandlers = [];\nvar retrieveMapHandlers = [];\n\nfunction isInBrowser() {\n  if (environment === \"browser\")\n    return true;\n  if (environment === \"node\")\n    return false;\n  return ((typeof window !== 'undefined') && (typeof XMLHttpRequest === 'function') && !(window.require && window.module && window.process && window.process.type === \"renderer\"));\n}\n\nfunction hasGlobalProcessEventEmitter() {\n  return ((typeof process === 'object') && (process !== null) && (typeof process.on === 'function'));\n}\n\nfunction handlerExec(list) {\n  return function(arg) {\n    for (var i = 0; i < list.length; i++) {\n      var ret = list[i](arg);\n      if (ret) {\n        return ret;\n      }\n    }\n    return null;\n  };\n}\n\nvar retrieveFile = handlerExec(retrieveFileHandlers);\n\nretrieveFileHandlers.push(function(path) {\n  // Trim the path to make sure there is no extra whitespace.\n  path = path.trim();\n  if (path in fileContentsCache) {\n    return fileContentsCache[path];\n  }\n\n  var contents = null;\n  if (!fs) {\n    // Use SJAX if we are in the browser\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', path, false);\n    xhr.send(null);\n    var contents = null\n    if (xhr.readyState === 4 && xhr.status === 200) {\n      contents = xhr.responseText\n    }\n  } else if (fs.existsSync(path)) {\n    // Otherwise, use the filesystem\n    try {\n      contents = fs.readFileSync(path, 'utf8');\n    } catch (er) {\n      contents = '';\n    }\n  }\n\n  return fileContentsCache[path] = contents;\n});\n\n// Support URLs relative to a directory, but be careful about a protocol prefix\n// in case we are in the browser (i.e. directories may start with \"http://\")\nfunction supportRelativeURL(file, url) {\n  if (!file) return url;\n  var dir = path.dirname(file);\n  var match = /^\\w+:\\/\\/[^\\/]*/.exec(dir);\n  var protocol = match ? match[0] : '';\n  return protocol + path.resolve(dir.slice(protocol.length), url);\n}\n\nfunction retrieveSourceMapURL(source) {\n  var fileData;\n\n  if (isInBrowser()) {\n     try {\n       var xhr = new XMLHttpRequest();\n       xhr.open('GET', source, false);\n       xhr.send(null);\n       fileData = xhr.readyState === 4 ? xhr.responseText : null;\n\n       // Support providing a sourceMappingURL via the SourceMap header\n       var sourceMapHeader = xhr.getResponseHeader(\"SourceMap\") ||\n                             xhr.getResponseHeader(\"X-SourceMap\");\n       if (sourceMapHeader) {\n         return sourceMapHeader;\n       }\n     } catch (e) {\n     }\n  }\n\n  // Get the URL of the source map\n  fileData = retrieveFile(source);\n  var re = /(?:\\/\\/[@#][ \\t]+sourceMappingURL=([^\\s'\"]+?)[ \\t]*$)|(?:\\/\\*[@#][ \\t]+sourceMappingURL=([^\\*]+?)[ \\t]*(?:\\*\\/)[ \\t]*$)/mg;\n  // Keep executing the search to find the *last* sourceMappingURL to avoid\n  // picking up sourceMappingURLs from comments, strings, etc.\n  var lastMatch, match;\n  while (match = re.exec(fileData)) lastMatch = match;\n  if (!lastMatch) return null;\n  return lastMatch[1];\n};\n\n// Can be overridden by the retrieveSourceMap option to install. Takes a\n// generated source filename; returns a {map, optional url} object, or null if\n// there is no source map.  The map field may be either a string or the parsed\n// JSON object (ie, it must be a valid argument to the SourceMapConsumer\n// constructor).\nvar retrieveSourceMap = handlerExec(retrieveMapHandlers);\nretrieveMapHandlers.push(function(source) {\n  var sourceMappingURL = retrieveSourceMapURL(source);\n  if (!sourceMappingURL) return null;\n\n  // Read the contents of the source map\n  var sourceMapData;\n  if (reSourceMap.test(sourceMappingURL)) {\n    // Support source map URL as a data url\n    var rawData = sourceMappingURL.slice(sourceMappingURL.indexOf(',') + 1);\n    sourceMapData = new Buffer(rawData, \"base64\").toString();\n    sourceMappingURL = source;\n  } else {\n    // Support source map URLs relative to the source URL\n    sourceMappingURL = supportRelativeURL(source, sourceMappingURL);\n    sourceMapData = retrieveFile(sourceMappingURL);\n  }\n\n  if (!sourceMapData) {\n    return null;\n  }\n\n  return {\n    url: sourceMappingURL,\n    map: sourceMapData\n  };\n});\n\nfunction mapSourcePosition(position) {\n  var sourceMap = sourceMapCache[position.source];\n  if (!sourceMap) {\n    // Call the (overrideable) retrieveSourceMap function to get the source map.\n    var urlAndMap = retrieveSourceMap(position.source);\n    if (urlAndMap) {\n      sourceMap = sourceMapCache[position.source] = {\n        url: urlAndMap.url,\n        map: new SourceMapConsumer(urlAndMap.map)\n      };\n\n      // Load all sources stored inline with the source map into the file cache\n      // to pretend like they are already loaded. They may not exist on disk.\n      if (sourceMap.map.sourcesContent) {\n        sourceMap.map.sources.forEach(function(source, i) {\n          var contents = sourceMap.map.sourcesContent[i];\n          if (contents) {\n            var url = supportRelativeURL(sourceMap.url, source);\n            fileContentsCache[url] = contents;\n          }\n        });\n      }\n    } else {\n      sourceMap = sourceMapCache[position.source] = {\n        url: null,\n        map: null\n      };\n    }\n  }\n\n  // Resolve the source URL relative to the URL of the source map\n  if (sourceMap && sourceMap.map) {\n    var originalPosition = sourceMap.map.originalPositionFor(position);\n\n    // Only return the original position if a matching line was found. If no\n    // matching line is found then we return position instead, which will cause\n    // the stack trace to print the path and line for the compiled file. It is\n    // better to give a precise location in the compiled file than a vague\n    // location in the original file.\n    if (originalPosition.source !== null) {\n      originalPosition.source = supportRelativeURL(\n        sourceMap.url, originalPosition.source);\n      return originalPosition;\n    }\n  }\n\n  return position;\n}\n\n// Parses code generated by FormatEvalOrigin(), a function inside V8:\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js\nfunction mapEvalOrigin(origin) {\n  // Most eval() calls are in this format\n  var match = /^eval at ([^(]+) \\((.+):(\\d+):(\\d+)\\)$/.exec(origin);\n  if (match) {\n    var position = mapSourcePosition({\n      source: match[2],\n      line: +match[3],\n      column: match[4] - 1\n    });\n    return 'eval at ' + match[1] + ' (' + position.source + ':' +\n      position.line + ':' + (position.column + 1) + ')';\n  }\n\n  // Parse nested eval() calls using recursion\n  match = /^eval at ([^(]+) \\((.+)\\)$/.exec(origin);\n  if (match) {\n    return 'eval at ' + match[1] + ' (' + mapEvalOrigin(match[2]) + ')';\n  }\n\n  // Make sure we still return useful information if we didn't find anything\n  return origin;\n}\n\n// This is copied almost verbatim from the V8 source code at\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js. The\n// implementation of wrapCallSite() used to just forward to the actual source\n// code of CallSite.prototype.toString but unfortunately a new release of V8\n// did something to the prototype chain and broke the shim. The only fix I\n// could find was copy/paste.\nfunction CallSiteToString() {\n  var fileName;\n  var fileLocation = \"\";\n  if (this.isNative()) {\n    fileLocation = \"native\";\n  } else {\n    fileName = this.getScriptNameOrSourceURL();\n    if (!fileName && this.isEval()) {\n      fileLocation = this.getEvalOrigin();\n      fileLocation += \", \";  // Expecting source position to follow.\n    }\n\n    if (fileName) {\n      fileLocation += fileName;\n    } else {\n      // Source code does not originate from a file and is not native, but we\n      // can still get the source position inside the source string, e.g. in\n      // an eval string.\n      fileLocation += \"<anonymous>\";\n    }\n    var lineNumber = this.getLineNumber();\n    if (lineNumber != null) {\n      fileLocation += \":\" + lineNumber;\n      var columnNumber = this.getColumnNumber();\n      if (columnNumber) {\n        fileLocation += \":\" + columnNumber;\n      }\n    }\n  }\n\n  var line = \"\";\n  var functionName = this.getFunctionName();\n  var addSuffix = true;\n  var isConstructor = this.isConstructor();\n  var isMethodCall = !(this.isToplevel() || isConstructor);\n  if (isMethodCall) {\n    var typeName = this.getTypeName();\n    // Fixes shim to be backward compatable with Node v0 to v4\n    if (typeName === \"[object Object]\") {\n      typeName = \"null\";\n    }\n    var methodName = this.getMethodName();\n    if (functionName) {\n      if (typeName && functionName.indexOf(typeName) != 0) {\n        line += typeName + \".\";\n      }\n      line += functionName;\n      if (methodName && functionName.indexOf(\".\" + methodName) != functionName.length - methodName.length - 1) {\n        line += \" [as \" + methodName + \"]\";\n      }\n    } else {\n      line += typeName + \".\" + (methodName || \"<anonymous>\");\n    }\n  } else if (isConstructor) {\n    line += \"new \" + (functionName || \"<anonymous>\");\n  } else if (functionName) {\n    line += functionName;\n  } else {\n    line += fileLocation;\n    addSuffix = false;\n  }\n  if (addSuffix) {\n    line += \" (\" + fileLocation + \")\";\n  }\n  return line;\n}\n\nfunction cloneCallSite(frame) {\n  var object = {};\n  Object.getOwnPropertyNames(Object.getPrototypeOf(frame)).forEach(function(name) {\n    object[name] = /^(?:is|get)/.test(name) ? function() { return frame[name].call(frame); } : frame[name];\n  });\n  object.toString = CallSiteToString;\n  return object;\n}\n\nfunction wrapCallSite(frame) {\n  if(frame.isNative()) {\n    return frame;\n  }\n\n  // Most call sites will return the source file from getFileName(), but code\n  // passed to eval() ending in \"//# sourceURL=...\" will return the source file\n  // from getScriptNameOrSourceURL() instead\n  var source = frame.getFileName() || frame.getScriptNameOrSourceURL();\n  if (source) {\n    var line = frame.getLineNumber();\n    var column = frame.getColumnNumber() - 1;\n\n    // Fix position in Node where some (internal) code is prepended.\n    // See https://github.com/evanw/node-source-map-support/issues/36\n    var headerLength = 62;\n    if (line === 1 && column > headerLength && !isInBrowser() && !frame.isEval()) {\n      column -= headerLength;\n    }\n\n    var position = mapSourcePosition({\n      source: source,\n      line: line,\n      column: column\n    });\n    frame = cloneCallSite(frame);\n    frame.getFileName = function() { return position.source; };\n    frame.getLineNumber = function() { return position.line; };\n    frame.getColumnNumber = function() { return position.column + 1; };\n    frame.getScriptNameOrSourceURL = function() { return position.source; };\n    return frame;\n  }\n\n  // Code called using eval() needs special handling\n  var origin = frame.isEval() && frame.getEvalOrigin();\n  if (origin) {\n    origin = mapEvalOrigin(origin);\n    frame = cloneCallSite(frame);\n    frame.getEvalOrigin = function() { return origin; };\n    return frame;\n  }\n\n  // If we get here then we were unable to change the source position\n  return frame;\n}\n\n// This function is part of the V8 stack trace API, for more info see:\n// http://code.google.com/p/v8/wiki/JavaScriptStackTraceApi\nfunction prepareStackTrace(error, stack) {\n  if (emptyCacheBetweenOperations) {\n    fileContentsCache = {};\n    sourceMapCache = {};\n  }\n\n  return error + stack.map(function(frame) {\n    return '\\n    at ' + wrapCallSite(frame);\n  }).join('');\n}\n\n// Generate position and snippet of original source with pointer\nfunction getErrorSource(error) {\n  var match = /\\n    at [^(]+ \\((.*):(\\d+):(\\d+)\\)/.exec(error.stack);\n  if (match) {\n    var source = match[1];\n    var line = +match[2];\n    var column = +match[3];\n\n    // Support the inline sourceContents inside the source map\n    var contents = fileContentsCache[source];\n\n    // Support files on disk\n    if (!contents && fs && fs.existsSync(source)) {\n      try {\n        contents = fs.readFileSync(source, 'utf8');\n      } catch (er) {\n        contents = '';\n      }\n    }\n\n    // Format the line from the original source code like node does\n    if (contents) {\n      var code = contents.split(/(?:\\r\\n|\\r|\\n)/)[line - 1];\n      if (code) {\n        return source + ':' + line + '\\n' + code + '\\n' +\n          new Array(column).join(' ') + '^';\n      }\n    }\n  }\n  return null;\n}\n\nfunction printErrorAndExit (error) {\n  var source = getErrorSource(error);\n\n  if (source) {\n    console.error();\n    console.error(source);\n  }\n\n  console.error(error.stack);\n  process.exit(1);\n}\n\nfunction shimEmitUncaughtException () {\n  var origEmit = process.emit;\n\n  process.emit = function (type) {\n    if (type === 'uncaughtException') {\n      var hasStack = (arguments[1] && arguments[1].stack);\n      var hasListeners = (this.listeners(type).length > 0);\n\n      if (hasStack && !hasListeners) {\n        return printErrorAndExit(arguments[1]);\n      }\n    }\n\n    return origEmit.apply(this, arguments);\n  };\n}\n\nexports.wrapCallSite = wrapCallSite;\nexports.getErrorSource = getErrorSource;\nexports.mapSourcePosition = mapSourcePosition;\nexports.retrieveSourceMap = retrieveSourceMap;\n\nexports.install = function(options) {\n  options = options || {};\n\n  if (options.environment) {\n    environment = options.environment;\n    if ([\"node\", \"browser\", \"auto\"].indexOf(environment) === -1) {\n      throw new Error(\"environment \" + environment + \" was unknown. Available options are {auto, browser, node}\")\n    }\n  }\n\n  // Allow sources to be found by methods other than reading the files\n  // directly from disk.\n  if (options.retrieveFile) {\n    if (options.overrideRetrieveFile) {\n      retrieveFileHandlers.length = 0;\n    }\n\n    retrieveFileHandlers.unshift(options.retrieveFile);\n  }\n\n  // Allow source maps to be found by methods other than reading the files\n  // directly from disk.\n  if (options.retrieveSourceMap) {\n    if (options.overrideRetrieveSourceMap) {\n      retrieveMapHandlers.length = 0;\n    }\n\n    retrieveMapHandlers.unshift(options.retrieveSourceMap);\n  }\n\n  // Support runtime transpilers that include inline source maps\n  if (options.hookRequire && !isInBrowser()) {\n    var Module;\n    try {\n      Module = require('module');\n    } catch (err) {\n      // NOP: Loading in catch block to convert webpack error to warning.\n    }\n    var $compile = Module.prototype._compile;\n\n    if (!$compile.__sourceMapSupport) {\n      Module.prototype._compile = function(content, filename) {\n        fileContentsCache[filename] = content;\n        sourceMapCache[filename] = undefined;\n        return $compile.call(this, content, filename);\n      };\n\n      Module.prototype._compile.__sourceMapSupport = true;\n    }\n  }\n\n  // Configure options\n  if (!emptyCacheBetweenOperations) {\n    emptyCacheBetweenOperations = 'emptyCacheBetweenOperations' in options ?\n      options.emptyCacheBetweenOperations : false;\n  }\n\n  // Install the error reformatter\n  if (!errorFormatterInstalled) {\n    errorFormatterInstalled = true;\n    Error.prepareStackTrace = prepareStackTrace;\n  }\n\n  if (!uncaughtShimInstalled) {\n    var installHandler = 'handleUncaughtExceptions' in options ?\n      options.handleUncaughtExceptions : true;\n\n    // Provide the option to not install the uncaught exception handler. This is\n    // to support other uncaught exception handlers (in test frameworks, for\n    // example). If this handler is not installed and there are no other uncaught\n    // exception handlers, uncaught exceptions will be caught by node's built-in\n    // exception handler and the process will still be terminated. However, the\n    // generated JavaScript code will be shown above the stack trace instead of\n    // the original source code.\n    if (installHandler && hasGlobalProcessEventEmitter()) {\n      uncaughtShimInstalled = true;\n      shimEmitUncaughtException();\n    }\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/source-map-support/source-map-support.js\n// module id = 78\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 79\n// module chunks = 0","module.exports = require(\"module\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"module\"\n// module id = 80\n// module chunks = 0","module.exports = require(\"source-map\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"source-map\"\n// module id = 81\n// module chunks = 0"],"sourceRoot":""}